@if (!isLoginPage()) {
<mat-toolbar class="app-toolbar">
  <div class="toolbar-content">
    <div class="app-brand">
      <svg class="app-logo-full" width="280" height="60" viewBox="0 0 280 60" fill="none"
        xmlns="http://www.w3.org/2000/svg" aria-label="FitTrack logo">
        <path class="logo-icon"
          d="M30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60V30H60C60 13.4315 46.5685 0 30 0Z" />

        <text class="logo-text" x="75" y="42" font-family="Poppins, sans-serif" font-size="36" font-weight="700"
          letter-spacing="-1">
          FitTrack
        </text>
      </svg>
    </div>
    <nav class="app-nav" [class.open]="menuOpen()">
      <a mat-button routerLink="/home" routerLinkActive="active-link" (click)="closeMenu()">Home</a>
      <a mat-button routerLink="/exercises" routerLinkActive="active-link" (click)="closeMenu()">Exercises</a>
      <a mat-button routerLink="/plans" routerLinkActive="active-link" (click)="closeMenu()">Plans</a>
      <a mat-button routerLink="/sessions" routerLinkActive="active-link" (click)="closeMenu()">Sessions</a>
      <a mat-button routerLink="/workouts" routerLinkActive="active-link" (click)="closeMenu()">Workouts</a>

      @if (authService.isLoggedIn()) {
      <div class="mobile-user-actions">
        <span class="mobile-username">{{ authService.currentUser()?.username }}</span>
        <button mat-button class="mobile-logout-btn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </div>
      } @else {
      <div class="mobile-user-actions">
        <a mat-button routerLink="/login" class="mobile-login-btn" (click)="closeMenu()">
          <mat-icon>login</mat-icon>
          Login
        </a>
      </div>
      }

    </nav>
    <div class="header-actions">
      <div class="header-actions-pill">
        <button mat-icon-button (click)="toggleTheme()" class="theme-toggle-btn">
          <mat-icon>{{ themeService.currentTheme() === 'light' ? 'dark_mode' : 'light_mode' }}</mat-icon>
        </button>
        @if (authService.isLoggedIn()) {
        <span class="pill-divider"></span>
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-avatar-btn">
          <mat-icon class="user-avatar-icon">person</mat-icon>
        </button>
        <mat-menu #userMenu="matMenu" class="user-menu-dropdown">
          <div class="user-menu-header">
            <span class="user-menu-name">{{ authService.currentUser()?.username }}</span>
          </div>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
        } @else {
        <span class="pill-divider"></span>
        <a mat-button routerLink="/login" class="login-btn">
          <mat-icon>login</mat-icon>
          Login
        </a>
        }
      </div>
      <button mat-icon-button class="hamburger-btn" (click)="toggleMenu()" [class.open]="menuOpen()">
        <mat-icon>{{ menuOpen() ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>
}

<main class="app-content" [class.fullscreen]="isLoginPage()">
  <router-outlet />
</main>